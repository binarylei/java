# Intellij idea 系列教程之 Language level 和 Java Compiler 版本自动变化问题

## 概述

最近将 Intellij Idea 的版本升级之后，在对 maven 项目进行编译或打包时，经常出现一大堆的错误，错误的提示基本上都是 jdk 版本不正确导致的语法错误。刚开始没太留意，以为是默认配置没有修改。于是把 Settings 中的 Java Compiler 和 Project Settings 中的 Language level 都改为自己使用的版本，比如 jdk1.8 ，问题暂时得到解决。可是下次编译或打包又会偶然出现同样的问题（后来发现之所以偶然出现是因为对 pom 文件改动才会出现）。

## 原因分析

经排查，原来是这个问题的根源在于 maven 的 pom.xml 文件中未配置 jdk 版本导致。当未配置 jdk 版本时，一旦 pom 文件发生变化，Java Compiler 和 Language level 会自动变回到原来的默认 1.5 版本。

## 解决方案

在 pom 文件中添加 maven-compiler-plugin 插件，并指定 jdk 使用的 jdk 版本即可解决上面问题。maven-compiler-plugin 的配置同时对 Java compiler 和 Language level 同时生效。

配置内容如下：

```xml
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.5.1</version>
            <configuration>
                <source>1.8</source>
                <target>1.8</target>
            </configuration>
        </plugin>
    </plugins>
</build>
```

本人现在使用的jdk8，因此配置1.8。遇到类似问题，可根据具体使用的jdk版本配置相应的版本号。