# Java反射系列（二）反射在WEB中的应用

在 JSP 中有一种技术--JavaBean。而且在 JSP 里面也配套有相应的操作方式。JavaBean 的核心在于简单 Java 类，下面演示此操作，[demo]()：

```java
@SuppressWarnings("serial")
public class Student implements Serializable {
    private String name;
    private Integer age;
    private Double score;
}
```

本类中提供有三种数据类型，在WEB项目中所建立的每一个 *.java 类最终都会保存在 WEB-INF/classes 下，所以 classes 就一个 CLASSPATH。

下面有一个需求：建立一个表单，此表单中可以输入数据，输入完成的数据要求输入到 Student 类中。同时再通过 Student 类对象取得所输入的数据。

下面需要一个表单输入页面 -- student_insert.jsp

```jsp
<%@ page language="java" import="java.util.*" pageEncoding="utf-8"%>
<%
  request.setCharacterEncoding("utf-8");
  String path = request.getContextPath();
  String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";
%>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <base href="<%=basePath%>">
  <title>student_insert</title>
</head>

<body>
  <form action="jsp/student_insert_do.jsp" method="get">
    姓名：<input type="text" name="name"><br>
    年龄：<input type="text" name="age"><br>
    分数：<input type="text" name="score"><br>
    <button type="submit">提交</button>
  </form>
</body>
</html>
```

还需要一个表单提交页面 -- student_insert.jsp

```jsp
<%@ page language="java" import="java.util.*" pageEncoding="utf-8"%>
<%@page import="com.github.binarylei.reflect.demo2.Student" %>
<%
  request.setCharacterEncoding("utf-8");
  String path = request.getContextPath();
  String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";
%>
<jsp:useBean id="stu" class="com.github.binarylei.reflect.demo2.Student"/>
<jsp:setProperty name="stu" property="*"/>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <base href="<%=basePath%>">
  <title>student_insert_do</title>
</head>

<body>
  <h2>姓名：<jsp:getProperty name="stu" property="name"/></h2>
  <h2>年龄：<jsp:getProperty name="stu" property="age"/></h2>
  <h2>分数：<jsp:getProperty name="stu" property="score"/></h2>
</body>
</html>
```

下面来分析一下这三个标签：

1. 定义 JavaBean 对象：<jsp:useBean id="stu" class="com.github.binarylei.reflect.demo2.Student"/>

    * `id` 对象的名字
    * `class` 对象的类型，此处是依靠反射实例化对象
    * `scope` 对象的保存范围，有四种(page、request、session、application)

2. 设置属性内容：<jsp:setProperty name="stu" property="*"/>

    * `name` 表示要操作的对象名称，与id相同
    * `property` 要操作的属性名称，如果为 `*` 表示自动匹配，参数名称要和属性名称一致才可以进行数据的接收(调用setter()方法)

3. 取得属性内容：<jsp:getProperty name="stu" property="score"/>

    * `name` 表示要操作的对象名称，与id相同
    * `property` 要获取操作的属性名称(调用getter()方法)